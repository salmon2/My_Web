{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Router from \"next/router\";\nexport const initialState = {\n  user: {\n    id: '',\n    //primary key\n    email: '',\n    password: '',\n    stdnum: 0,\n    major: '',\n    nickname: ''\n  },\n  fetchinUpdate: false,\n  //로그인 중 상태확인\n  isLoggedIn: false\n};\nexport const LOG_IN_REQUEST = 'LOG_IN_REQUEST';\nexport const LOG_IN_SUCCESS = 'LOG_IN_SUCCESS';\nexport const LOG_IN_FAILRUE = 'LOG_IN_FAILRUE';\nexport const USER_REQUEST = 'USER_REQUEST';\nexport const USER_SUCCESS = 'USER_SUCCESS';\nexport const USER_FAILRUE = 'USER_FAILRUE';\nexport const SIGNUP_REQUEST = 'SIGNUP_REQUEST';\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\nexport const SIGNUP_FAILRUE = 'SIGNUP_FAILRUE';\nexport const LOG_OUT = 'LOG_OUT';\nexport const logInAction = data => {\n  //console.log('logInAction');\n  return {\n    type: LOG_IN_REQUEST,\n    data: data\n  };\n};\nexport const userAction = data => {\n  return {\n    type: USER_REQUEST,\n    data: data\n  };\n};\nexport const SignupAction = data => {\n  console.log('SignupAction');\n  console.log(data);\n  return {\n    type: SIGNUP_REQUEST,\n    data: data\n  };\n};\nexport const logOutAction = () => {\n  return {\n    type: LOG_OUT,\n    user: null\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOG_IN_REQUEST:\n      //console.log('login_request')\n      //console.log('login' + JSON.stringify(action.data));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: true,\n        isLoggedIn: false\n      });\n\n    case LOG_IN_SUCCESS:\n      sessionStorage.setItem('user', JSON.stringify(action.data));\n      sessionStorage.setItem('islogined', true);\n      console.log(JSON.parse(sessionStorage.user));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: action.data,\n        fetchinUpdate: false,\n        isLoggedIn: true\n      });\n\n    case LOG_IN_FAILRUE:\n      console.log('fail');\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: false,\n        isLoggedIn: false\n      });\n\n    case SIGNUP_REQUEST:\n      console.log('signup_request');\n      console.log('signup_' + JSON.stringify(action.data));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: true\n      });\n\n    case SIGNUP_SUCCESS:\n      console.log('signup_success');\n      console.log('signup_' + JSON.stringify(action.data));\n      alert('signup_success');\n      Router.push(\"/login\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: false\n      });\n\n    case SIGNUP_FAILRUE:\n      console.log('signup_fail');\n      console.log('signup_' + JSON.stringify(action.data));\n      alert('signup_fail');\n      Router.push(\"/signup\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: false\n      });\n\n    case USER_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: true\n      });\n\n    case USER_SUCCESS:\n      sessionStorage.setItem('writerinfo', JSON.stringify(action.data));\n      console.log(JSON.parse(sessionStorage.getItem('writerinfo')));\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: false\n      });\n\n    case USER_FAILRUE:\n      alert('userloading fail');\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetchinUpdate: false\n      });\n\n    case LOG_OUT:\n      sessionStorage.setItem('islogined', false);\n      sessionStorage.removeItem('user');\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoggedIn: false\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["D:/project/Kit-Diary/front/reducers/user.js"],"names":["Router","initialState","user","id","email","password","stdnum","major","nickname","fetchinUpdate","isLoggedIn","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILRUE","USER_REQUEST","USER_SUCCESS","USER_FAILRUE","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILRUE","LOG_OUT","logInAction","data","type","userAction","SignupAction","console","log","logOutAction","reducer","state","action","sessionStorage","setItem","JSON","stringify","parse","alert","push","getItem","removeItem"],"mappings":"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","sourcesContent":["import Router from \"next/router\";\r\nexport const initialState = {\r\n  user:{\r\n    id: '', //primary key\r\n    email: '',\r\n    password: '',\r\n    stdnum: 0,\r\n    major:  '',\r\n    nickname: '',\r\n  },\r\n\r\n\r\n  fetchinUpdate: false,   //로그인 중 상태확인\r\n  isLoggedIn: false,\r\n}\r\n\r\nexport const LOG_IN_REQUEST = 'LOG_IN_REQUEST'\r\nexport const LOG_IN_SUCCESS = 'LOG_IN_SUCCESS'\r\nexport const LOG_IN_FAILRUE = 'LOG_IN_FAILRUE'\r\n\r\nexport const USER_REQUEST = 'USER_REQUEST'\r\nexport const USER_SUCCESS = 'USER_SUCCESS'\r\nexport const USER_FAILRUE = 'USER_FAILRUE'\r\n\r\n\r\n\r\nexport const SIGNUP_REQUEST = 'SIGNUP_REQUEST'\r\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS'\r\nexport const SIGNUP_FAILRUE = 'SIGNUP_FAILRUE'\r\n\r\nexport const LOG_OUT = 'LOG_OUT'\r\n\r\n\r\nexport const logInAction = (data) => {\r\n  //console.log('logInAction');\r\n  return {\r\n    type: LOG_IN_REQUEST,\r\n    data: data\r\n  }\r\n}\r\n\r\nexport const userAction = (data) =>{\r\n  return {\r\n    type: USER_REQUEST,\r\n    data: data,\r\n  }\r\n}\r\n\r\nexport const SignupAction = (data) => {\r\n  console.log('SignupAction');\r\n  console.log(data);\r\n  return {\r\n    type: SIGNUP_REQUEST,\r\n    data: data\r\n  }\r\n}\r\n\r\n\r\nexport const logOutAction = () => {\r\n  return {\r\n    type: LOG_OUT,\r\n    user: null\r\n  }\r\n}\r\n\r\nconst reducer = (state=initialState, action) =>{\r\n  switch(action.type){\r\n      case LOG_IN_REQUEST:\r\n        //console.log('login_request')\r\n        //console.log('login' + JSON.stringify(action.data));\r\n          return {\r\n              ...state,\r\n              fetchinUpdate: true,\r\n              isLoggedIn: false,\r\n          };\r\n      case LOG_IN_SUCCESS:\r\n        sessionStorage.setItem('user', JSON.stringify(action.data));\r\n        sessionStorage.setItem('islogined', true);\r\n        console.log(JSON.parse(sessionStorage.user));\r\n        return { \r\n          ...state,\r\n          user : action.data,\r\n          fetchinUpdate: false,\r\n          isLoggedIn: true,\r\n        }\r\n      case LOG_IN_FAILRUE:\r\n          console.log('fail');\r\n          return {\r\n              ...state,\r\n              fetchinUpdate: false,\r\n              isLoggedIn: false,\r\n          }\r\n      case SIGNUP_REQUEST:\r\n        console.log('signup_request')\r\n        console.log('signup_' + JSON.stringify(action.data));\r\n        return{\r\n          ...state,\r\n          fetchinUpdate:true,\r\n        }\r\n      case SIGNUP_SUCCESS:\r\n          console.log('signup_success')\r\n          console.log('signup_' + JSON.stringify(action.data));\r\n          alert('signup_success')\r\n          Router.push(\"/login\")\r\n          return{\r\n            ...state,\r\n            fetchinUpdate:false,\r\n        }\r\n      case SIGNUP_FAILRUE:\r\n        console.log('signup_fail')\r\n        console.log('signup_' + JSON.stringify(action.data));\r\n        alert('signup_fail')\r\n        Router.push(\"/signup\")\r\n        return{\r\n          ...state,\r\n          fetchinUpdate:false,\r\n         }\r\n\r\n         \r\n      case USER_REQUEST:\r\n        return{\r\n          ...state,\r\n          fetchinUpdate:true,\r\n        }\r\n      case USER_SUCCESS:\r\n        sessionStorage.setItem('writerinfo', JSON.stringify(action.data));\r\n        console.log(JSON.parse(sessionStorage.getItem('writerinfo')));\r\n        return{\r\n          ...state,\r\n          fetchinUpdate:false,\r\n        }\r\n      case USER_FAILRUE:\r\n        alert('userloading fail');\r\n        return{\r\n          ...state,\r\n          fetchinUpdate:false,\r\n        }\r\n\r\n\r\n\r\n\r\n      case LOG_OUT:\r\n        sessionStorage.setItem('islogined', false);\r\n        sessionStorage.removeItem('user');\r\n        return {\r\n            ...state,\r\n            isLoggedIn: false,\r\n        }\r\n      default:\r\n          return state ;\r\n  }\r\n}\r\n\r\nexport default reducer"]},"metadata":{},"sourceType":"module"}